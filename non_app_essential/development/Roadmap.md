# Code notes
- z-index levels:
  - -1: background, should not be used
  - 0: background
  - 1: foreground

# Notes
- When adding community scenarios, add attributions at
  - Name of scenario to display in app, e.g. by xxx
  - Help
  - README
# Basic requirements
- Backward save compatibility (do so by making a plugin app for converting save from old map to new seamlessly)
- Plugin-extension system to allow adding stuff
- Tool panel like in Krita to allow slapping tools and plugins in
- Basic timeline panel on the left
- Phone/tablet version with no extra tools, just map and timeline list on the bottom
- Separate data from interface, i.e. componetn states is strictly for ui/ux display info, the underlying data detrmining this should be conferred to some other object to allow easier manipulation and that should be connected to the top level component to link via that to the component display hierarchy
- Link old app to new app both via github and via the actual app file itself
- All side bar components should be allowed to disappeear and be retracted
- Make components have good APIs for extensibility
# Beta version
- [x] 0.1.0: 3D or 2D Map component (perhaps allowing 2D alternatives, it depends on what library we get), should allow basemap imports
- [x] 0.2.0: Timeline component
  - Clear entry
  - Delete entry
  - Timeline to click on
  - Add entry
  - Controlled date and event input elements
- [x] 0.3.0: Save/load functionality
  - Currently assumed only the admin map is used hence saves only include the scenarioData
- [x] 0.4.0: Toolbar
  - Lasso select
  - Eraser
- [x] 0.5.0: Add smooth scrolling leaflet plugin
- [x] 0.6.0: Plugin and extension capabilities, i.e. ensure there is a highly extensive and versatile API for accessing the various features of the features above (keep this in mind when writing the program as well, i.e. try to use functional programming I'd say)
  - Plugins should be of the form of a single react component js file, needing only to import relevant material ui and react libraries, following the structure of existing custom components
  - There should exists a standard api to the app to which the plugins be able to access
  - Adding plugin to app should be simple as place file into a folder, and at most needing to update a plugin registry file
- [x] 0.7.0: Legend
- [x] 0.8.0: Various minor features
  - Make timeline bar and timeline event directly rendered by app to reduce rendering costs
  - Click on Legend to select color, so to allow selecting the same color as existing one on legend
- [x] 0.9.0: New map button (probably just refresh the page tbh for simplicity)
- [x] 0.10.0: Region info plugin, displays on hovering above a region
  - Region label
  - Region name
- [x] 0.11.0: Plugin for importing admin map saves from old editor
- [x] 0.12.0: Refining visuals
  - Try create a neoclassical style interface
  - Position attribution element in a convenient location, this is mandatory as attribution is key
- [x] 0.13.0: Scenarios plugin
- [x] 0.14.0: Help button
# Standard version
## Version 1
- [x] 1.0.0: fix any bugs from the beta versions and bundle it no release on github pages
    - Favicon
    - Add google analytics
    - Meta, SEO
    - Linking from old app
    - README
    - Advertising online
    - Attributions
      - Basemap source (use same as alternative history editor, noting on personal alterations)
- [x] 1.1.0: more background map providers
- [x] 1.1.1: add title to site
- [x] 1.1.2: changing positions of buttons and minimum sizes of panels for better mobile performance
- [x] 1.1.3: use react memo to improve performance
- [x] 1.1.4: resolve lag due to regionInfo plugin
- [x] 1.2.0: add color picker from region
- [x] 1.3.0: allow custom imports of geojson basemap plugin
  - Add the basemap as part of the save file
- [x] 1.3.1: add 2021 map by DawnbreakerZ
- [ ] 1.3.2: add in display names for elements to help debugging
- [ ] 1.3.3: code thinning and reuse, split code to smaller files though functionality should remain same
- [ ] 1.3.4: abusive use testing, fix bugs, try to minimise need to refresh page
- [ ] 1.3.5: add in proptypes for type checking
- [ ] 1.4.0: setup an alternate site for in test deployment, and only deploy to main site once sure it works well
- [ ] 1.5.0: allow theme selection changing, e.g. swap out a different theme and only resetting style afterwards; themes could include no border lines, 1 opacity 
- [ ] 1.6.0: add extra inbuilt base map, a more reasonable one with finer dividsions where it needs and less fine where it isn't needed
- [ ] 1.7.0: info marker plugin
  - Various plugin shapes
  - Info adding to markers possible
- [ ] 1.8.0: import background image option
- [ ] 1.9.0: more projections
## Possible future plugins planned (these can go into separate repos, as separate projects), some might not be plugins in the sense that it goes into the sidebar menu
- [ ] Convert image to basemap/scenario, of appropriate format
- [ ] Wikipedia event AI recommendation
- [ ] Auto generation of territorial changes based on natural language processing or just in general with randomness
- [ ] Visual customization
- [ ] GIF/Screenshot generation
- [ ] Timeline play button
- [ ] Detailed state world building: e.g. mark major cities, flags, hereditary linages, populations, gdp
- [ ] Data generation for states, e.g. land area
- [ ] Marker features, e.g. city, factories, fortification, etc.
- [ ] Import own basemaps, and then can include it as part of output save like in alternate history editor
- [ ] Allow importing image as background instead of provided tilelayer, and possibly save image in a save package

## Potential side apps to supplement, possibly linking into a suite of apps
- [ ] Image processing ai or likewise, turn image of borders into geojson polygons and then allow manual addition of labels; mainly its the ocr tech

# Possible code improvements
- Minimise use of refs
- Try to find another way as opposed to passing the App's this value to the plugin methods that run after corresponding App methods
- Improve map performance by reducing style resetting
# Possible future features
- THE LONGTERM AIM: can just upload an image, and base map geojson is auto generated with background, or perhaps background could be inputted manually and shuffled around; so that any mapping timeline could be easily achieved and imported from existing artistic works
  - i.e. optical recognition and ai georeferencing are probably necessary
  - On second thought, leaflet might be too restricting due to its geo nature; perhaps I should open a brand new app that has a choropleth custom made engine as opposed to the georeferenced leaflet for non-earth, i.e. general timeline mapping, where the focus is import your own world; of course there should be a base earth map to get people started with
- Add theme options, e.g. light theme, e.g. allow changing opacity of regions, e.g. allow changing width of the region border lines
- If webkit border image and background images fail, retreat back to a single color background
- Making clicking and highlighting more responsive
- If scenarios become too numerous, try storing them online and let the scenario plugin act simply as a download then load interface
- Compressed saves
- Refactor code, in particular names to make methods and variables more intuitive
- Write a document summarizing how plugins could be added and what functionalities it could have, including the API it has access of
- Make new map button more efficient by resetting required state values as opposed to reloading entire page
- Add chinese version
- Use more icons alongside words for buttons
- Make work well for phones
- Geojson editor to create basemaps or edit them easily
- Link
- Wikipedia extension with suggested event/people lookups via AI
- Auto generatic of scenario
- AI to simulate and change territory and generate events elsewhere to save player time from changing less so important regions (turn on or off and also choose for what regions or states perhaps to turn it on)
- Play timeline
- Smooth scrolling
- Generate timeline
- Scenarios and points of divergence
- Edit region names (this would require possibly changing the way data is stored for the app, or possibly via a plugin that requires as part of the save an additional id to name mapping for different entries in the save)
- Allow disabling plugins for sake of speed